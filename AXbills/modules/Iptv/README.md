# Модуль IPTV
### Проверенные системы
- 24ТВ
- IPTVPortal
- Смотрёшка
- Stalker Portal

## Общие установки
В **config.pl**

#### Включение
```
@MODULES = (
             'Iptv'
           );
```
#### Общие параметры
```
$conf{IPTV_USER_UNIQUE_TP}=1;		# Запретить два одинаковых сервисных тарифных плана для одного абонента. У каждой услуги должен быть свой уникальный ТП.
$conf{IPTV_CLOSE_PERIOD}=0;		# Снимать месячную абон. плату только после установки флага период закрыт. 
$conf{IPTV_USER_CHG_TP}=1;		# Изменение тарифного плана на следующий учётный период
$conf{IPTV_USER_CHG_CHANNELS}=1;	# Выбор каналов из интерфейса пользователя.
$conf{IPTV_SHOW_ALL_SERVICES} = 1;	# Отображать все услуги в баннере оплат.
$conf{IPTV_SHOW_FREE_TPS} = 1;		# Отображать бесплатные ТП в баннере.
$conf{IPTV_SKIP_CHG_TPS}='';		# Скрыть тарифы IPTV из кабинета абонента, прописывать TP_ID.

```
## 24ТВ
### Установка
Проверяем, подключен-ли плагин работы через API
```
ln -s /usr/axbills/AXbills/modules/Iptv/get_pl.cgi /usr/axbills/cgi-bin/get_pl.cgi
```
Настраиваем apache для работы с модулем
В **/etc/apache2/sites-enabled/axbills-httpd.conf добавляем следующее:**
```
<Directory "/usr/axbills/cgi-bin">
     RewriteEngine On
     RewriteRule auth /get_pl.cgi?&%{QUERY_STRING}
     RewriteRule packet /get_pl.cgi?&%{QUERY_STRING}
     RewriteRule delete_subscription /get_pl.cgi?&%{QUERY_STRING}
</Directory>
```
## Обязательно перезапускаем apache !
В **config.pl** прописывает токен, выданный поставщиком услуги
```
$conf{TV24_TOKEN} = '098ert876fgg'; 
```
### Настройка на стороне админки
```
Настройка -> Телевидение -> Телевидение -> "+"
```
- Номер				- Номер в админке
- Название			- 24ТВ (Смотрёшка, IPTVPortal, Телевидение...)
- Plug-in			- 24tv
- Пользователь			- Control
- Отключено			- Да/Нет
- Портал продавца услуги	- Ваш URL
- --- Авторизация
- URL				- Ссылка доступа по API, Выданная поставщиком услуги
- Логин				- KA3HA
- Пароль			- KA3HA

## IPTVPortal
### Настройка на стороне админки
```
Настройка -> Телевидение -> Телевидение -> "+"
```
- Номер				- Номер в админке
- Название			- IPTVPortal (Смотрёшка, 24ТВ, Телевидение...)
- Plug-in			- iptvportal
- Пользователь			- Control
- Отключено			- Да/Нет
- Портал продавца услуги	- Ваш URL
- --- Авторизация
- URL				- Ссылка доступа по API, выданная поставщиком услуги
- Логин				- Логин от поставщика
- Пароль			- Пароль от поставщика

## Смотрёшка
### Настройка на стороне админки
```
Настройка -> Телевидение -> Телевидение -> "+"
```
- Номер				- Номер в админке
- Название			- Smotreshka (Смотрёшка, IPTVPortal, Телевидение...)
- Plug-in			- Smotreshka
- Пользователь			- Control
- Отключено			- Да/Нет
- Портал продавца услуги	- Ваш URL
- --- Авторизация
- URL				- Ссылка доступа по API, выданная поставщиком услуги
- Логин				- Логин от поставщика
- Пароль			- Пароль от поставщика

#### Если нужно выделить своих абонентов, чтоб не было пересечения с другими операторами,
#### можно использовать префикс, который виден только на стороне Смотрёшки
В **config.pl**
```
$conf{SMOTRESHKA_PREFIX}='KTK-'; 
```

## Stalker Portal
### Настройка на стороне админки
```
Настройка -> Телевидение -> Телевидение -> "+"
```
- Номер                         - Номер в админке
- Название                      - Stalker (Смотрёшка, IPTVPortal, Телевидение...)
- Plug-in                       - Stalker_api
- Пользователь                  - Control
- Отключено                     - Да/Нет
- Портал продавца услуги        - Ваш URL
- --- Авторизация
- URL                           - Ссылка доступа по API, выданная поставщиком услуги
- Логин                         - Логин от поставщика
- Пароль                        - Пароль от поставщика


=====================================================================

# Донат приветствуется

#### Помочь проекту:
```
2200 7001 2045 7196 - МИР
AVOSEND ( https://avosend.com ) - (Карта - 2200700120457196 ФИО - DENIS KUBA Тел. +79020377510)
```
Естественно, все карты работают внутри России!

Что-то срочное, или не получается - ищите меня в чате Телеги - https://t.me/KTKBilling 

Назначение платежа - **"На печеньки"**

Сертификат соответствия, выданный нашей компанией, подтверждает что АСР является подлинной копией
